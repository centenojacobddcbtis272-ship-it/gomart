{% extends "base.html" %}
{% block content %}

<div class="container mt-5 d-flex justify-content-center">

    <div class="d-flex justify-content-center mt-4">
        <div class="card shadow" style="max-width: 500px; width:100%;">
            <div class="card-body text-center">

                <h3 class="mb-4">Mi perfil</h3>

                <img src="{{ user.foto }}" class="rounded-circle shadow-sm mb-3" width="130">

                <p><strong>Nombre:</strong> {{ user.nombre_completo }}</p>
                <p><strong>Correo:</strong> {{ user.correo }}</p>

                <hr>

                <h5 class="mt-3">Dirección de envío</h5>
                {% if user.direccion %}
                <p class="mt-2">
                    {{ user.direccion.calle }} #{{ user.direccion.numero }},
                    {{ user.direccion.colonia }}<br>
                    {{ user.direccion.ciudad }}, {{ user.direccion.estado }}<br>
                    CP: {{ user.direccion.cp }}
                </p>
                {% else %}
                <p class="text-muted">No has registrado una dirección.</p>
                {% endif %}

                <hr>

                <a href="{{ url_for('editar_perfil') }}" class="btn btn-primary w-100 mb-2">Editar información</a>
                <a href="{{ url_for('cambiar_password') }}" class="btn btn-warning w-100 mb-2">Cambiar contraseña</a>
                <a href="{{ url_for('cambiar_foto') }}" class="btn btn-info w-100 mb-2 text-white">Cambiar foto</a>
                <a href="{{ url_for('historial') }}" class="btn btn-success w-100">Historial de compras</a>

            </div>
        </div>
    </div>

    <!-- DATOS -->
    <p><strong>Nombre:</strong> {{ user.nombre_completo }}</p>
    <p><strong>Correo:</strong> {{ user.correo }}</p>

    <!-- NUEVO: DIRECCIÓN -->
    <p>
        <strong>Dirección:</strong>
        {{ user.direccion if user.direccion else "Sin dirección" }}
    </p>

    <hr>

    <!-- BOTONES -->
    <a href="{{ url_for('editar_perfil') }}" class="btn btn-primary mb-2 w-100">
        Editar información
    </a>

    <a href="{{ url_for('cambiar_password') }}" class="btn btn-warning mb-2 w-100">
        Cambiar contraseña
    </a>

    <a href="{{ url_for('cambiar_foto') }}" class="btn btn-info mb-2 w-100 text-white">
        Cambiar foto
    </a>

    <a href="{{ url_for('historial') }}" class="btn btn-success w-100">
        Historial de compras
    </a>

</div>
</div>

</div>

{% endblock %}